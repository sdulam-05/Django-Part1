{% extends 'main.html' %}

{% block content %}
<h1>{{ room.name }}</h1>
<p>Topic: {{ room.topic.name }}</p>
<p>{{ room.description }}</p>

<h3>Messages</h3>
{% for message in messages %}
    <p>
        <strong>{{ message.user.username }}</strong>: {{ message.body }} 
        <small>{{ message.created|timesince }} ago</small>
        {% if request.user == message.user %}
            <a href="{% url 'delete-message' message.id %}">Delete</a>
        {% endif %}
    </p>
{% empty %}
    <p>No messages yet.</p>
{% endfor %}

{% if request.user.is_authenticated %}
    <form method="POST">
        {% csrf_token %}
        <input type="text" name="body" placeholder="Write a message...">
        <button type="submit">Send</button>
    </form>
{% else %}
    <p><a href="{% url 'login' %}">Login</a> to send messages.</p>
{% endif %}
{% endblock %}
