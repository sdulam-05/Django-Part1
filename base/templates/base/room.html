{% extends 'main.html' %}

{% block content %}
<h1>{{ room.name }}</h1>
<p>{{ room.description }}</p>

<h3>Conversation</h3>
<div>
    {% for message in room_messages %}
        <div>
            <small>@{{ message.user }} - {{ message.created|timesince }} ago</small>
            <p>{{ message.body }}</p>
            {% if request.user == message.user %}
                <a href="{% url 'delete-message' message.id %}" style="color: red;">Delete</a>
            {% endif %}
        </div>
    {% endfor %}
</div>

{% if request.user.is_authenticated %}
<form method="POST">
    {% csrf_token %}
    <input type="text" name="body" placeholder="Write your message here..." required>
</form>
{% endif %}

<h3>Participants</h3>
{% for user in participants %}
    <p>@{{ user.username }}</p>
{% endfor %}
{% endblock %}
